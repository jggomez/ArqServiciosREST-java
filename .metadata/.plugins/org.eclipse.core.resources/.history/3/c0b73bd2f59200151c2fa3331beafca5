package co.gov.dane.uo.cache;

import javax.cache.CacheManager;
import javax.cache.Caching;
import javax.enterprise.context.ApplicationScoped;
import javax.enterprise.inject.Disposes;
import javax.enterprise.inject.Produces;
import javax.inject.Singleton;

public class CacheProducer {
	
	@Produce
    @Singleton
    @LocalCacheProvider
    public CacheManager createCacheManager() {
        // property can be extracted to server configuration
        System.setProperty("hazelcast.jcache.provider.type", "server");
        return Caching.getCachingProvider().getCacheManager();
    }

    public void close(@Disposes @LocalCacheProvider final CacheManager instance) {
        instance.close();
    }

}
